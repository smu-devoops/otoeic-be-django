# API Reference

## 사용자 서비스

### 사용자 회원가입

```
POST /user/register
{
    "username": USERNAME,
    "password": PASSWORD
}
```

* 201: 회원이 성공적으로 생성됨
* 400: 잘못된 형식

### 사용자 로그인

```
POST /user/login
{
    "username": USERNAME,
    "password": PASSWORD
}
```

* 200: 로그인 성공
* 그 외: 로그인 실패

이 때, 로그인에 성공하면 로그인한 유저 정보를 받음.

### 사용자 로그아웃

```
GET /user/logout
```
* 200: 로그아웃 성공
* ~~205: 로그아웃 성공~~


### 사용자 정보 조회

```
GET /user/USER_ID
```
* 200: 성공
* 404: 해당 아이디의 사용자가 존재하지 않음

사용자 홈에 출력하기 위해 필요한 정보들을 출력해줌.

## 단어 서비스

### 단어 목록 조회

[Requires login]
```
GET /word
```
* 200: 성공
* 401: 로그인이 되어있지 않음

query parameter로 필터를 붙일 수 있음.

* 필터를 이용하여 특정 조건을 만족하는 단어만 볼 수 있음
* 필터를 이용하여 특정 순서로 정렬된 단어를 볼 수 있음

사용가능한 필터는 브라우저로 해당 주소에 접근하면 자세한 옵션들을 볼 수 있다.

관리자 계정은 모든 단어를 볼 수 있지만, 사용자 계정은 공용 단어와 자신이 생성한 단어만 볼 수 있다.

### 단어 생성

[Requires login]
```
POST /word
{
    "english": str,
    "korean": str,
    "type": str,
    "level": int
}
```
* 200: 성공
* 401: 로그인이 되어있지 않음

### 단어 목록 조회

[Requires login]
```
GET /word
```
* 200: 성공
* 401: 로그인이 되어있지 않음

query parameter로 필터를 붙일 수 있음.

* 필터를 이용하여 특정 조건을 만족하는 단어만 볼 수 있음
* 필터를 이용하여 특정 순서로 정렬된 단어를 볼 수 있음

사용가능한 필터는 브라우저로 해당 주소에 접근하면 자세한 옵션들을 볼 수 있다.

관리자 계정은 모든 단어를 볼 수 있지만, 사용자 계정은 공용 단어와 자신이 생성한 단어만 볼 수 있다.


### 단어 수정

[Requires login]
```
PATCH /word/WORD_ID
{
    "english": str,
    "korean": str,
    "type": str,
    "level": int
}
```
* 200: 수정에 성공함
* ~~205: 수정에 성공함~~
* 400: 형식이 잘못됨
* 401: 로그인이 되어있지 않음
* 403: 수정할 권한이 없음

Body에 있는 JSON 데이터 중에서 수정할 항목만 보내면 된다.

### 단어 삭제

[Requires login]
```
DELETE /word/WORD_ID
```
* 200: 성공적으로 삭제 됨
* ~~204: 성공적으로 삭제 됨~~
* 401: 로그인이 되어있지 않음
* 403: 삭제할 권한이 없음

## 시험 서비스

### 시험 생성
[Requires login]
```
POST /exam
{
    "level": int,
    "amount": int,
    "ranked": bool
}
```
* 201: 성공적으로 시험이 생성됨 (시험 문제 목록 반환)
* 400: 잘못된 데이터 형식 (level, amount가 잘못된 경우)
* 401: 로그인이 되어있지 않음

### 시험 정보 (재)조회
[Requires login]
```
GET /exam/EXAM_ID
```
* 200: 문제 없음
* 401: 로그인이 되어있지 않음
* 404: 해당 아이디의 시험이 존재하지 않음

시험 정보에는 답안이 포함되어 있지 않음.

### 시험 제출
[Requires login]
```
POST /exam/EXAM_ID/submit
{
    "answers": array[str],
}
```
* 200: 정상적으로 제출 됨
* 400: 답안이 누락되거나 초과함
* 401: 로그인이 되어있지 않음
* 404: 해당 아이디의 시험이 존재하지 않음

각 문제의 답을 순서대로 저장한 배열을 보내야 한다. 풀지 않은 문제는 빈 문자열 `""`을 보낸다.


### 시험 결과 정보 조회
[Requires login]
```
GET /exam/EXAM_ID/result
```
* 200: 정상적으로 조회 됨
* 401: 로그인이 되어있지 않음
* 404: 해당 아이디의 시험이 존재하지 않음

답안과 점수가 표함된 시험 결과가 반환됨.


## 스트릭 서비스

### 스트릭 캘린더 조회
```
GET /streak/calendar/USER_ID
```
* 200: 정상적으로 조회됨
* 404: 해당 사용자가 존재하지 않음

날짜 별로 시험을 본 개수가 담긴 딕셔너리를 반환할 듯?

예:
```
{
    calendar: {
        "2024-05-...": 1,
        "2024-05-...": 0,
        "2024-05-...": 3,
        "2024-05-...": 10
    }
}
```

### 스트릭 프리즈 구매
[Requires login]
```
POST /streak/freeze
{
    "amount": int // default = 1
}
```
* 200: 정상적으로 구매 됨
* 401: 로그인이 되어있지 않음
* 403: 거래가 승인되지 않음
    * 예1) 포인트 부족
    * 예2) 최대 소지 개수 초과

### 스트릭 프리즈 활성/비활성
[Requires login]
```
PATCH /streak/freeze
{
    "activate": bool
}
```
